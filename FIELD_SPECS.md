# 화면별 데이터 필드 명세서 (Field Specifications) - v0.1

이 문서는 각 화면에서 사용자가 입력하거나 확인해야 하는 데이터 항목을 상세 정의합니다.

---

## 1. 회원가입 및 프로필 (User Profile)

가입 시 최소한의 정보만 받고, 신청 단계에서 필요한 추가 정보를 수집합니다.

| 화면                          | 필드명        | 타입     | 필수 | 설명/제약조건                                           |
| :---------------------------- | :------------ | :------- | :--- | :------------------------------------------------------ |
| **회원가입**                  | 이메일 (ID)   | Email    | Y    | 중복 불가, 본인인증 연동 키가 될 수 있음                |
|                               | 비밀번호      | Password | Y    | 영문, 숫자, 특수문자 조합 8자 이상 (소셜로그인 시 생략) |
|                               | 이름 (실명)   | String   | Y    | 대회 보험 가입 및 본인 확인용                           |
|                               | 휴대폰 번호   | String   | Y    | `010-XXXX-XXXX` 형식, 알림톡 발송용                     |
|                               | 생년월일      | Date     | Y    | `YYYY-MM-DD`, 연령별 순위 집계 및 보험 가입용           |
|                               | 성별          | Enum     | Y    | `M` / `F`, 남녀 성별 구분 시상용                        |
| **추가 정보**<br>(마이페이지) | 주소 (기본)   | String   | N    | 우편번호, 기본주소, 상세주소 분리 저장                  |
|                               | 티셔츠 사이즈 | Enum     | N    | `XS`, `S`, `M`, `L`, `XL`, `2XL`, `3XL` (기본값 설정)   |
|                               | 비상연락처    | String   | N    | 대회 중 사고 발생 시 연락할 가족/지인 번호              |
|                               | 혈액형        | Enum     | N    | 위급 상황 대비용 (선택 사항)                            |

---

## 2. 대회 신청 (Registration)

가장 복잡한 데이터가 오가는 화면입니다.

| 섹션            | 필드명         | 타입     | 설명                                                             |
| :-------------- | :------------- | :------- | :--------------------------------------------------------------- |
| **종목 선택**   | 참가 종목      | Enum     | `5K`, `10K`, `Full` 등 (선택 시 잔여 수량 체크)                  |
|                 | 참가 그룹      | Enum     | `A조`, `B조` (기록 없으면 시스템 자동 배정 또는 미배정)          |
| **참가자 정보** | 이름/연락처    | Readonly | 회원 정보에서 자동 로드 (수정 불가 또는 회원정보 수정 유도)      |
|                 | 비상연락처     | String   | **필수 입력**. 비상 시 연락처                                    |
| **참가 유형**   | 유형 선택      | Radio    | `개인` / `단체`                                                  |
|                 | 그룹 코드      | String   | 단체 선택 시 활성화. 유효성 검사(존재하는 그룹인지) 필요         |
|                 | 그룹명(확인용) | Readonly | 코드 입력 성공 시 그룹명 노출 (예: "러닝크루 A팀")               |
| **기념품 옵션** | 티셔츠 사이즈  | Select   | 재고 연동(품절 시 선택 불가 처리 고려)                           |
|                 | 추가 굿즈      | Checkbox | 유료 옵션 (예: 에너지젤 세트 +10,000원)                          |
| **배송지**      | 수령 방법      | Radio    | `택배 수령` / `현장 수령` (대회 정책에 따라 하나만 있을 수 있음) |
|                 | 배송지 정보    | Form     | 이름, 전화번호, 주소 (회원 기본 배송지 로드 버튼 제공)           |
| **결제**        | 결제 수단      | Select   | 카드, 가상계좌, 카카오페이 등                                    |
|                 | 최종 결제 금액 | Number   | 참가비 + 옵션비 - 할인(단체/쿠폰)                                |

---

## 3. 마이페이지 - 대회/기록 (My Page)

| 컴포넌트      | 표시 항목       | 데이터 출처                                                    |
| :------------ | :-------------- | :------------------------------------------------------------- |
| **대회 티켓** | 신청 번호       | `registrations.merchant_uid` (주문번호)                        |
|               | 등번호 (Bib)    | `registrations.bib_number` (결제 후 확정 전까지 '배정중' 표시) |
|               | 현장 수령 QR    | 클릭 시 생성되는 일회용 토큰 또는 고유 해시값                  |
|               | 배송 상태       | `결제완료` > `배송준비` > `배송중` > `배송완료`                |
| **러닝 기록** | 공식 기록 (Net) | `records.net_time` (출발선~도착선 통과 시간)                   |
|               | 공식 기록 (Gun) | `records.gun_time` (출발 신호~도착선 통과 시간)                |
|               | 전체 순위       | `records.rank_overall`                                         |
|               | 연령별 순위     | `records.rank_age_gender`                                      |
|               | 완주증 이미지   | 생성된 이미지 URL                                              |

---

## 4. 관리자 - 대회 관리 (Admin)

| 기능          | 설정 항목        | 설명                                                 |
| :------------ | :--------------- | :--------------------------------------------------- |
| **대회 생성** | 접수 기간        | `registration_start_at` ~ `registration_end_at`      |
|               | 환불 마감일      | 날짜별 환불 규정 설정을 위한 기준일                  |
|               | 정보 수정 마감일 | 배송지/사이즈 변경이 불가능해지는 시점 (데이터 픽스) |
| **옵션 설정** | 종목별 정원      | 5K: 1000명, 10K: 2000명 등 (초과 시 마감 처리)       |
|               | 얼리버드 가격    | 특정 기간 내 결제 시 할인 가격 설정                  |
