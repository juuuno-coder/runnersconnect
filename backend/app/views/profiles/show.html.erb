<div class="max-w-6xl mx-auto px-6 py-16">
  <!-- Profile Header Card -->
  <div class="bg-white rounded-[3rem] shadow-xl shadow-blue-50 border border-gray-100 overflow-hidden mb-12">
    <div class="bg-gradient-to-r from-blue-600 to-indigo-700 h-32"></div>
    <div class="px-10 pb-10">
      <div class="relative flex flex-col sm:flex-row items-center sm:items-end -mt-16 sm:space-x-8 mb-8 text-center sm:text-left">
        <div class="w-32 h-32 bg-white rounded-full p-2 shadow-lg">
          <div class="w-full h-full bg-gray-100 rounded-full flex items-center justify-center text-gray-400">
            <svg class="h-16 w-16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
          </div>
        </div>
        <div class="mt-4 sm:mt-0 flex-1">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
            <div>
              <h1 class="text-3xl font-black text-gray-900 tracking-tighter"><%= @user.name %></h1>
              <p class="text-gray-500 font-bold uppercase tracking-widest text-xs mt-1">Beginner Runner</p>
            </div>
            <%= link_to "프로필 수정", edit_profile_path, class: "mt-4 sm:mt-0 inline-flex items-center px-6 py-2 bg-gray-50 hover:bg-gray-100 text-gray-700 font-bold rounded-xl border border-gray-200 transition-all text-sm" %>
          </div>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="bg-gray-50 p-6 rounded-3xl text-center">
          <p class="text-[10px] text-gray-400 font-black uppercase tracking-widest mb-1">대회 참가</p>
          <p class="text-2xl font-black text-gray-900"><%= @registrations_count %></p>
        </div>
        <div class="bg-gray-50 p-6 rounded-3xl text-center">
          <p class="text-[10px] text-gray-400 font-black uppercase tracking-widest mb-1">완주 횟수</p>
          <p class="text-2xl font-black text-gray-900"><%= @total_records %></p>
        </div>
        <div class="bg-gray-50 p-6 rounded-3xl text-center">
          <p class="text-[10px] text-gray-400 font-black uppercase tracking-widest mb-1">누적 거리</p>
          <p class="text-2xl font-black text-blue-600"><%= number_with_precision(@user.total_distance, precision: 1) %>km</p>
        </div>
        <div class="bg-gray-50 p-6 rounded-3xl text-center">
          <p class="text-[10px] text-gray-400 font-black uppercase tracking-widest mb-1">크루</p>
          <p class="text-2xl font-black text-indigo-600"><%= @user.led_crews.count %></p>
        </div>
      </div>
    </div>
  </div>

  <div class="grid lg:grid-cols-3 gap-12">
    <!-- Left: Activity & Portfolio -->
    <div class="lg:col-span-2 space-y-12">
      <section>
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-black text-gray-900 flex items-center">
            <span class="w-2 h-8 bg-blue-600 rounded-full mr-4"></span>
            나의 베스트 기록
          </h2>
          <%= link_to "상세보기", records_path, class: "text-blue-600 font-bold text-sm hover:underline" %>
        </div>
        <div class="grid sm:grid-cols-2 gap-6">
          <div class="bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 relative overflow-hidden group">
            <div class="absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity">
              <svg class="h-12 w-12" fill="currentColor" viewBox="0 0 24 24"><path d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            </div>
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2">5K PB</p>
            <p class="text-2xl font-black text-gray-900"><%= @pb_5k || "--:--" %></p>
          </div>
          <div class="bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 relative overflow-hidden group">
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2">10K PB</p>
            <p class="text-2xl font-black text-gray-900"><%= @pb_10k || "--:--" %></p>
          </div>
          <div class="bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 relative overflow-hidden group">
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2">Half PB</p>
            <p class="text-2xl font-black text-gray-900"><%= @pb_half || "--:--:--" %></p>
          </div>
          <div class="bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 relative overflow-hidden group">
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2">Full PB</p>
            <p class="text-2xl font-black text-gray-900"><%= @pb_full || "--:--:--" %></p>
          </div>
        </div>
      </section>

      <section>
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-black text-gray-900 flex items-center">
            <span class="w-2 h-8 bg-indigo-600 rounded-full mr-4"></span>
            최근 활동
          </h2>
          <%= link_to "전체보기", registrations_path, class: "text-blue-600 font-bold text-sm hover:underline" %>
        </div>
        <div class="bg-white rounded-[2rem] border border-gray-100 divide-y divide-gray-50 overflow-hidden shadow-sm">
          <% if current_user.registrations.any? %>
            <% current_user.registrations.limit(3).each do |reg| %>
              <div class="p-6 flex items-center justify-between hover:bg-gray-50 transition-colors">
                <div class="flex items-center space-x-4">
                  <div class="w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 font-black text-xs">
                    GO
                  </div>
                  <div>
                    <h4 class="font-bold text-gray-900"><%= reg.race.title %></h4>
                    <p class="text-xs text-gray-400"><%= reg.created_at.strftime("%Y년 %m월 %d일 신청") %></p>
                  </div>
                </div>
                <span class="px-3 py-1 bg-gray-100 text-gray-500 text-[10px] font-black rounded-full uppercase"><%= reg.status.upcase %></span>
              </div>
            <% end %>
          <% else %>
            <div class="p-12 text-center text-gray-400 font-medium italic">
              최근 활동 내역이 없습니다.
            </div>
          <% end %>
        </div>
      </section>
    </div>

    <!-- Right: Personal Info -->
    <div class="space-y-8">
      <section class="bg-white rounded-[2.5rem] p-8 shadow-sm border border-gray-100">
        <h3 class="text-lg font-black text-gray-900 mb-6 uppercase tracking-tighter">Personal Info</h3>
        <div class="space-y-6">
          <div class="flex items-start space-x-4">
            <div class="mt-1 p-2 bg-gray-50 rounded-lg">
              <svg class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
            </div>
            <div>
              <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Email</p>
              <p class="text-sm font-bold text-gray-700"><%= @user.email %></p>
            </div>
          </div>
          <div class="flex items-start space-x-4">
            <div class="mt-1 p-2 bg-gray-50 rounded-lg">
              <svg class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
            </div>
            <div>
              <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Phone</p>
              <p class="text-sm font-bold text-gray-700"><%= @user.phone_number.present? ? @user.phone_number : "미등록" %></p>
            </div>
          </div>
          <div class="flex items-start space-x-4">
            <div class="mt-1 p-2 bg-gray-50 rounded-lg">
              <svg class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            </div>
            <div>
              <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Address</p>
              <p class="text-sm font-bold text-gray-700 leading-snug">
                <%= @user.address_basic.present? ? "#{@user.address_basic} #{@user.address_detail}" : "배송 주소를 등록해주세요." %>
              </p>
            </div>
          </div>
        </div>
      </section>

      <div class="bg-gray-900 rounded-[2.5rem] p-8 text-white">
        <h4 class="font-black text-lg mb-2 tracking-tighter">러닝 크루</h4>
        <p class="text-xs text-white/50 mb-6 font-medium">크루원들과 함께 달리면 동기부여와 실력 향상에 큰 도움이 됩니다.</p>
        <%= link_to "크루 찾기", crews_path, class: "block w-full text-center py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold transition-all text-sm" %>
      </div>
    </div>
  </div>
</div>
