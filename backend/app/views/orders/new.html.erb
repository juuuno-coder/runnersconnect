<div class="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <!-- ν—¤λ” -->
    <div class="mb-12">
      <h1 class="text-4xl font-black text-gray-900 mb-2">π’³ μ£Όλ¬Έν•κΈ°</h1>
      <p class="text-lg text-gray-600">λ°°μ†΅ μ •λ³΄λ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”</p>
    </div>

    <%= form_with model: @order, url: orders_path, method: :post, class: "grid grid-cols-1 lg:grid-cols-3 gap-8" do |f| %>
      <!-- μ™Όμ½: λ°°μ†΅ μ •λ³΄ μ…λ ¥ -->
      <div class="lg:col-span-2 space-y-6">
        <!-- λ°°μ†΅μ§€ μ •λ³΄ -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8">
          <h2 class="text-2xl font-black text-gray-900 mb-6">π“¦ λ°°μ†΅μ§€ μ •λ³΄</h2>

          <div class="space-y-4">
            <div>
              <%= f.label :shipping_address, "λ°°μ†΅ μ£Όμ†", class: "block text-sm font-bold text-gray-700 mb-2" %>
              <%= f.text_area :shipping_address,
                  rows: 3,
                  required: true,
                  placeholder: "μ: μ„μΈνΉλ³„μ‹ κ°•λ‚¨κµ¬ ν…ν—¤λ€λ΅ 123, μ°λ¦¬λΉλ”© 4μΈµ",
                  class: "block w-full px-4 py-3 rounded-xl border-gray-200 focus:ring-blue-500 focus:border-blue-500 shadow-sm transition-all" %>
              <p class="text-xs text-gray-500 mt-2">π’΅ λ€ν λ‹ΉμΌ ν„μ¥ μλ Ήλ„ κ°€λ¥ν•©λ‹λ‹¤</p>
            </div>

            <div>
              <%= f.label :shipping_phone, "μ—°λ½μ²", class: "block text-sm font-bold text-gray-700 mb-2" %>
              <%= f.tel_field :shipping_phone,
                  required: true,
                  placeholder: "010-1234-5678",
                  class: "block w-full px-4 py-3 rounded-xl border-gray-200 focus:ring-blue-500 focus:border-blue-500 shadow-sm transition-all" %>
            </div>
          </div>
        </div>

        <!-- μ£Όλ¬Έ μƒν’ λ©λ΅ -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8">
          <h2 class="text-2xl font-black text-gray-900 mb-6">π“‹ μ£Όλ¬Έ μƒν’</h2>

          <div class="space-y-4">
            <% @cart.cart_items.each do |item| %>
              <div class="flex gap-4 pb-4 border-b border-gray-100 last:border-0">
                <!-- μƒν’ μ΄λ―Έμ§€ -->
                <div class="w-20 h-20 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg overflow-hidden flex-shrink-0">
                  <% if item.product.images.attached? %>
                    <%= image_tag item.product.images.first, class: "w-full h-full object-cover" %>
                  <% else %>
                    <div class="w-full h-full flex items-center justify-center">
                      <div class="text-2xl">π½</div>
                    </div>
                  <% end %>
                </div>

                <!-- μƒν’ μ •λ³΄ -->
                <div class="flex-1">
                  <h3 class="font-bold text-gray-900 mb-1"><%= item.product.name %></h3>
                  <p class="text-sm text-gray-500"><%= item.product.race.title %></p>
                  <div class="flex items-center gap-2 mt-2">
                    <% if item.product.size.present? %>
                      <span class="text-xs px-2 py-1 bg-gray-100 rounded font-bold text-gray-700">
                        <%= item.product.size %>
                      </span>
                    <% end %>
                    <% if item.product.color.present? %>
                      <span class="text-xs px-2 py-1 bg-gray-100 rounded font-bold text-gray-700">
                        <%= item.product.color %>
                      </span>
                    <% end %>
                  </div>
                </div>

                <!-- μλ‰ λ° κ°€κ²© -->
                <div class="text-right">
                  <p class="text-sm text-gray-500 mb-1">
                    <%= number_to_currency(item.unit_price, precision: 0) %> Γ— <%= item.quantity %>
                  </p>
                  <p class="text-lg font-black text-blue-600">
                    <%= number_to_currency(item.subtotal, precision: 0) %>
                  </p>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <!-- μ¤λ¥Έμ½: κ²°μ  μ •λ³΄ -->
      <div class="lg:col-span-1">
        <div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-8 sticky top-24">
          <h3 class="text-xl font-black text-gray-900 mb-6">π’° κ²°μ  μ •λ³΄</h3>

          <!-- μƒν’ κΈμ•΅ -->
          <div class="flex justify-between items-center mb-4">
            <span class="text-sm font-bold text-gray-600">μƒν’ κΈμ•΅</span>
            <span class="font-bold text-gray-900">
              <%= number_to_currency(@cart.total_amount, precision: 0) %>
            </span>
          </div>

          <!-- λ°°μ†΅λΉ„ -->
          <div class="flex justify-between items-center mb-6 pb-6 border-b border-gray-200">
            <span class="text-sm font-bold text-gray-600">λ°°μ†΅λΉ„</span>
            <span class="font-bold text-green-600">λ¬΄λ£</span>
          </div>

          <!-- μ΄ κ²°μ  κΈμ•΅ -->
          <div class="flex justify-between items-center mb-8 p-4 bg-blue-50 rounded-xl">
            <span class="text-lg font-black text-gray-900">μ΄ κ²°μ  κΈμ•΅</span>
            <span class="text-3xl font-black text-blue-600">
              <%= number_to_currency(@cart.total_amount, precision: 0) %>
            </span>
          </div>

          <!-- κ²°μ  λ°©λ²• (ν–¥ν›„ κµ¬ν„) -->
          <div class="mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded">
            <p class="text-sm text-yellow-800">
              π’΅ <strong>μ•λ‚΄</strong><br>
              κ²°μ λ” λ€ν λ‹ΉμΌ ν„μ¥μ—μ„ μ§„ν–‰λ©λ‹λ‹¤.<br>
              μ£Όλ¬Έ ν™•μΈ ν›„ λ°°μ†΅ μ¤€λΉ„κ°€ μ‹μ‘λ©λ‹λ‹¤.
            </p>
          </div>

          <!-- μ£Όλ¬Έν•κΈ° λ²„νΌ -->
          <%= f.submit "μ£Όλ¬Έν•κΈ°", class: "w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-xl transition-all text-lg shadow-lg cursor-pointer mb-3" %>

          <%= link_to "μ¥λ°”κµ¬λ‹λ΅ λμ•„κ°€κΈ°", cart_path, class: "block w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-bold rounded-xl transition-all text-center" %>

          <!-- μ΄μ© μ•½κ΄€ -->
          <div class="mt-6 text-xs text-gray-500 leading-relaxed">
            μ£Όλ¬Έ μ™„λ£ μ‹ <a href="#" class="text-blue-600 hover:underline">μ΄μ©μ•½κ΄€</a> λ° <a href="#" class="text-blue-600 hover:underline">κ°μΈμ •λ³΄ μ²λ¦¬λ°©μΉ¨</a>μ— λ™μν•λ” κ²ƒμΌλ΅ κ°„μ£Όλ©λ‹λ‹¤.
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
